(function(d,r,e,m,p,R,c,E,o,v){"use strict";const{FormRow:f}=c.Forms;function S(t){let{plugin:n,forceUpdate:i}=t;var a;const s=o.getSettings(n.id),l=e.NavigationNative.useNavigation();return e.React.createElement(f,{label:n.manifest.name,leading:e.React.createElement(f.Icon,{source:v.getAssetIDByName(((a=n.manifest.vendetta)===null||a===void 0?void 0:a.icon)??"ic_application_command_24px")}),trailing:f.Arrow,onPress:function(){return n.enabled?l.push("VendettaCustomPage",{title:n.manifest.name,render:s}):i()}})}const{FormSection:F,FormDivider:P}=c.Forms;function h(){E.useProxy(r.storage);const t=Object.keys(r.storage.pinnedPlugins),n=window.hasOwnProperty("enmity")||window.hasOwnProperty("Aliucord"),[,i]=e.React.useReducer(function(s){return~s},0);if(t.length===0)return null;const a=t.filter(function(s){return o.plugins[s]&&o.plugins[s].enabled}).map(function(s,l){return e.React.createElement(e.React.Fragment,null,e.React.createElement(S,{plugin:o.plugins[s],forceUpdate:i}),l!==t.length-1&&e.React.createElement(P,null))});return r.storage.appendExisting?e.React.createElement(c.ErrorBoundary,null,a):e.React.createElement(c.ErrorBoundary,null,e.React.createElement(F,{key:"PinSettingsPlugins",title:`${n?"Vendetta ":""}Plugins`},a))}const I=m.findByName("UserSettingsOverviewWrapper",!1);function b(){const t=new Array,n=p.after("default",I,function(i,a){const s=R.findInReactTree(a.props.children,function(l){return l.type&&l.type.name==="UserSettingsOverview"});t.push(p.after("render",s.type.prototype,function(l,M){let{props:{children:u}}=M;const V=[e.i18n.Messages.BILLING_SETTINGS,e.i18n.Messages.PREMIUM_SETTINGS];u=R.findInReactTree(u,function(g){return g.children[1].type===c.Forms.FormSection}).children;const w=u.findIndex(function(g){return V.includes(g?.props.label)});u.splice(w===-1?4:w,0,React.createElement(h,null))})),n()});return function(){return t.forEach(function(i){return i()})}}const{FormRow:N,FormRadioRow:x}=c.Forms;function _(t){let{name:n,id:i}=t;const a=r.storage.pinnedPlugins[i];return React.createElement(x,{label:n,trailing:N.Arrow,selected:a,onPress:function(){a?delete r.storage.pinnedPlugins[i]:r.storage.pinnedPlugins[i]=!0}})}const{FormRow:A,FormSection:y,FormSwitchRow:B,FormDivider:O}=c.Forms;function T(){return E.useProxy(r.storage),e.React.createElement(e.ReactNative.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},e.React.createElement(y,{title:"Options",titleStyleType:"no_border"},e.React.createElement(B,{label:"Append to Vendetta section",subLabel:"May be incompatible with other client mods.",leading:e.React.createElement(A.Icon,{source:v.getAssetIDByName("ic_edit_24px")}),value:r.storage.appendExisting,onValueChange:function(t){r.storage.appendExisting=t}})),e.React.createElement(y,{title:"Plugins"},e.React.createElement(e.ReactNative.FlatList,{data:Object.values(o.plugins).filter(function(t){return o.getSettings(t.id)}),ItemSeparatorComponent:O,renderItem:function(t){let{item:n}=t;return e.React.createElement(_,{name:n.manifest.name,id:n.id})}})))}r.storage.pinnedPlugins??={},r.storage.appendExisting??=!1;const U=[b()],$=function(){return U.forEach(function(t){return t()})};return d.onUnload=$,d.settings=T,d})({},vendetta.plugin,vendetta.metro.common,vendetta.metro,vendetta.patcher,vendetta.utils,vendetta.ui.components,vendetta.storage,vendetta.plugins,vendetta.ui.assets);
